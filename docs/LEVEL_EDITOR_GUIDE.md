# ICER Level Editor Guide

## 📝 概述

ICER关卡编辑器是一个简洁的文本编辑器，使用简单的字符系统创建自定义关卡。

## 🎮 启动编辑器

```bash
# 方式1: 直接启动
/usr/bin/python3 level_editor.py

# 方式2: 使用启动脚本
./run.sh
# 然后选择选项 2
```

## 🔧 编辑器界面

编辑器分为两部分：
- **左侧**: 关卡网格编辑区域
- **右侧**: 工具面板和信息显示

## ⌨️ 快捷键操作

### 🎯 对象放置 (数字键)
- **1**: 墙壁 (W) - 灰色方块
- **2**: 石头 (S) - 中等重量，可推动
- **3**: 冰块 (I) - 轻量，可滑动，会融化
- **4**: 火焰 (F) - 红色，需要熄灭的目标
- **5**: 冷锅 (C) - 白色，可以被点燃
- **6**: 热锅 (H) - 橙色，已点燃的锅
- **7**: 传送门1 (1) - 绿色，成对出现
- **8**: 传送门2 (2) - 绿色，成对出现  
- **9**: 传送门3 (3) - 绿色，成对出现
- **0**: 玩家 (P) - 蓝色，起始位置
- **空格**: 橡皮擦 (.) - 清空格子

### 🖱️ 鼠标操作
- **左键点击**: 放置当前选中的对象
- **右键点击**: 删除格子中的对象
- **按住左键拖动**: 连续放置对象

### 💾 文件操作
- **Ctrl+S**: 保存关卡到 `levels/` 目录
- **Ctrl+O**: 加载已存在的关卡
- **Ctrl+N**: 清空网格 (新关卡)
- **Delete**: 清空整个网格
- **F1**: 切换帮助显示

## 📋 关卡设计规则

### 基本要求
1. **必须有玩家**: 关卡中必须有一个玩家 (P) 起始位置
2. **至少一个目标**: 需要至少一个火焰 (F) 作为熄灭目标
3. **合理尺寸**: 使用 20x15 的标准网格

### 对象说明
| 字符 | 对象 | 描述 | 特殊属性 |
|------|------|------|----------|
| P | 玩家 | 游戏主角 | 必须有一个 |
| W | 墙壁 | 固定障碍物 | 不可移动 |
| S | 石头 | 重型物体 | 可推动，不可滑动 |
| I | 冰块 | 轻型物体 | 可推动+滑动，遇热融化 |
| F | 火焰 | 目标对象 | 需要熄灭 |
| C | 冷锅 | 点火对象 | 遇火焰点燃 |
| H | 热锅 | 加热对象 | 融化冰块 |
| 1-3 | 传送门 | 传送装置 | 相同数字配对 |

## 📄 TOML文件格式

关卡保存为TOML格式，简洁易读：

```toml
[level_metadata]
id = "my_level_001"
name = "My First Level"
difficulty = "easy"
author = "Your Name"
description = "A simple puzzle"
optimal_moves = 10
optimal_time = 30.0

[level_layout]
grid = [
    "....................",
    "....................",
    "..PW................",
    "....................",
    "...W...............F",
    "....................",
    "....................",
    "....................",
    "....................",
    "....................",
    "....................",
    "....................",
    "....................",
    "....................",
    "...................."
]
```

## 🎯 设计技巧

### 初学者设计
1. **简单的墙壁结构**: 创建基本的地形
2. **单火焰目标**: 从简单的目标开始
3. **逐步增加复杂性**: 先掌握基础机制

### 高级设计
1. **传送门谜题**: 利用传送门创造复杂路径
2. **连锁反应**: 设计需要多个步骤的解法
3. **物理谜题**: 结合推动、滑动、融化等机制

### 测试建议
1. **保存并测试**: 定期在游戏中测试关卡
2. **检查可解性**: 确保关卡有解决方案
3. **难度平衡**: 调整对象数量和布局

## 📁 文件管理

- **保存位置**: `levels/` 目录
- **文件名**: 自动生成包含时间戳的ID
- **扩展名**: `.toml` 文件
- **模板文件**: `levels/custom_level_template.toml`

## 🎮 在游戏中测试

保存关卡后，重新启动主游戏即可在菜单中看到自定义关卡：

```bash
# 启动主游戏
/usr/bin/python3 src/game/main.py

# 或使用启动脚本
./run.sh
# 选择选项 1
```

自定义关卡会自动出现在关卡选择菜单中！

---

**💡 提示**: 从简单的设计开始，逐步学习游戏机制，创造出富有挑战性的谜题！